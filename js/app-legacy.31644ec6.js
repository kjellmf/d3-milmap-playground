(function(t){function e(e){for(var a,i,s=e[0],c=e[1],l=e[2],u=0,h=[];u<s.length;u++)i=s[u],n[i]&&h.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);p&&p(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,s=1;s<r.length;s++){var c=r[s];0!==n[c]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},n={app:0},o=[];function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var p=c;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("cd49")},"46a5":function(t,e,r){},"5c0b":function(t,e,r){"use strict";var a=r("5e27"),n=r.n(a);n.a},"5e27":function(t,e,r){},"76f1":function(t,e,r){"use strict";var a=r("46a5"),n=r.n(a);n.a},cd49:function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("097d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container is-fluid",attrs:{id:"app"}},[r("div",{staticClass:"columns is-marginless"},[r("div",{staticClass:"column mapview"},[r("GlobeMap",{ref:"gmap",attrs:{rotation:t.rotation,scale:t.scale}},[r("MapSymbolLayer",{attrs:{layer:t.layer}})],1)],1),r("div",{staticClass:"column is-4 has-background-white-bis sidebar"},[t._m(0),r("div",[r("button",{staticClass:"button",on:{click:t.toggleSpin}},[t._v("Toggle spin")])]),r("MarkerList",{attrs:{markers:t.layer},on:{markerSelect:t.onMarkerSelect}})],1)])])},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[r("h1",[t._v("D3 map experiment")])])}],i=r("be94"),s=r("d4ec"),c=r("bee2"),l=r("99de"),p=r("7e84"),u=r("262e"),h=r("9ab4"),f=r("60a3"),d=r("b5ae"),y=(r("ac6a"),r("fd32")),b=r("9fc0"),m=r("6eee"),v=r("3fe2"),g=r("b108"),j=r("a43d"),O=r("d61f"),k=r.n(O),_=r("517f"),C="10030100001101000000",S=430,M=[0,0,0],P=function(){function t(e,r,a,n){var o=this;Object(s["a"])(this,t),this.centerPos=[0,0],this.refreshCallbacks=[],this.width=r,this.height=a;var i=Object(b["c"])().clipAngle(90).scale(n.scale||S).translate([r/2,a/2]).rotate(M);this.pathGenerator=Object(b["d"])().projection(i).pointRadius(1.5),this.svg=Object(y["f"])(e),this.proj=i,this.createGlobe(),Object(m["a"])().projection(i).onMove(function(t){return o.refresh()})(this.svg.node())}return Object(c["a"])(t,[{key:"createGlobe",value:function(){var t=this.svg,e=this.proj,r=this.pathGenerator,a=Object(b["b"])();t.append("circle").attr("cx",this.width/2).attr("cy",this.height/2).attr("r",e.scale()).attr("class","earth-circle noclicks").attr("fill","none"),t.append("path").data(v["a"](_,_.objects.land).features).attr("class","land").attr("d",r),t.append("path").datum(a).attr("class","graticule noclicks").attr("d",r)}},{key:"refresh",value:function(){var t=this.proj,e=this.pathGenerator;this.centerPos=t.invert([this.width/2,this.height/2]);var r=this.svg;r.selectAll(".earth-circle").attr("r",t.scale()),r.selectAll(".land").attr("d",e),r.selectAll(".countries path").attr("d",e),r.selectAll(".graticule").attr("d",e),this.refreshCallbacks.forEach(function(t){return t()})}},{key:"registerRefreshCallback",value:function(t){this.refreshCallbacks.push(t)}},{key:"rotateTo",value:function(t){var e=this,r=this.proj;Object(g["b"])().duration(2e3).tween("rotate",function(){var a=Object(j["a"])(r.rotate(),[-t[0],-t[1],0]);return function(t){r.rotate(a(t)),e.refresh()}})}},{key:"rotation",set:function(t){this.proj.rotate(t),this.refresh()},get:function(){return this.proj.rotate()}}]),t}(),w=function(){function t(e,r){var a=this;Object(s["a"])(this,t),this.layer=e,this.mapContainer=r;var n=this.mapContainer,o=(n.proj,n.svg);o.append("g").attr("class","symbols").selectAll("g").data(this.layer.features).enter().append("g").attr("class","symbol").html(function(t){var e=t.properties.sidc||C,r=new O["Symbol"](e,{size:20});return t.s=r,r.asSVG()}),this.positionSymbols(),r.registerRefreshCallback(function(){a.positionSymbols()})}return Object(c["a"])(t,[{key:"positionSymbols",value:function(){var t=this.mapContainer,e=t.proj,r=t.svg,a=t.centerPos;r.selectAll(".symbol").attr("transform",function(t){var r=Object(b["a"])(t.geometry.coordinates,a),n=1;r>1&&(n=1-1.25*(r-1));var o=e(t.geometry.coordinates),i=o[0],s=o[1],c=-t.s.octagonAnchor.x,l=-t.s.octagonAnchor.y;return"translate(".concat(i,", ").concat(s,") scale(").concat(n,") translate(").concat(c,", ").concat(l,")")}).style("display",function(t){var e=Object(b["a"])(t.geometry.coordinates,a);return e>1.57?"none":"inline"})}}]),t}(),F=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(l["a"])(this,Object(p["a"])(e).apply(this,arguments)),t.isMounted=!1,t}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"mounted",value:function(){this.mapContainer=this.globeData.mapContainer,this.symbolLayer=new w(this.layer,this.mapContainer)}},{key:"render",value:function(t){return null}},{key:"centerPos",get:function(){return this.mapContainer.centerPos}}]),e}(a["default"]);h["a"]([Object(f["c"])({type:Object})],F.prototype,"layer",void 0),h["a"]([Object(f["b"])()],F.prototype,"globeData",void 0),F=h["a"]([f["a"]],F);var N,x,A=F,T=A,D=r("2877"),G=Object(D["a"])(T,N,x,!1,null,null,null);G.options.__file="MapSymbolLayer.vue";var L=G.exports,$={type:"FeatureCollection",features:[{type:"Feature",properties:{name:"N1",sidc:"10032000001213010000"},geometry:{type:"Point",coordinates:[-122.41716877355225,37.76919562968743]}},{type:"Feature",properties:{name:"N2"},geometry:{type:"Point",coordinates:[-87.75200083270931,41.83193651927843]}},{type:"Feature",properties:{name:"N3"},geometry:{type:"Point",coordinates:[-118.243683,34.052235]}},{type:"Feature",properties:{name:"N4"},geometry:{type:"Point",coordinates:[-123.116226,49.246292]}},{type:"Feature",properties:{name:"N5"},geometry:{type:"Point",coordinates:[-114.062019,51.04427]}},{type:"Feature",properties:{name:"N6"},geometry:{type:"Point",coordinates:[2.154007,41.390205]}},{type:"Feature",properties:{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"",name:"",sidc:10010100001103e6},geometry:{type:"Point",coordinates:[141.328125,37.71859032558816]}},{type:"Feature",properties:{name:"N7"},geometry:{type:"Point",coordinates:[2.349014,48.864716]}},{type:"Feature",properties:{name:"N8"},geometry:{type:"Point",coordinates:[6.953101,50.935173]}},{type:"Feature",properties:{name:"N9"},geometry:{type:"Point",coordinates:[6.143158,46.204391]}},{type:"Feature",properties:{name:"N10",sidc:10063000001201e6},geometry:{type:"Point",coordinates:[91.0546875,-9.44906182688142]}},{type:"Feature",properties:{name:"N11",sidc:"10033000001201000001"},geometry:{type:"Point",coordinates:[-20,0]}},{type:"Feature",properties:{name:"N12",sidc:"10063500001101000006"},geometry:{type:"Point",coordinates:[-30,1]}},{type:"Feature",properties:{name:"N12",sidc:"10032500001313000000"},geometry:{type:"Point",coordinates:[0,90]}},{type:"Feature",properties:{name:"N12",sidc:"10032500001602050000"},geometry:{type:"Point",coordinates:[0,-90]}},{type:"Feature",properties:{name:"N12",sidc:"10033000001401090000"},geometry:{type:"Point",coordinates:[-155,20]}}]},R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"panel"},[r("p",{staticClass:"panel-heading"},[t._v("\n    Markers\n  ")]),t._l(t.features,function(e,a){return r("a",{key:a,staticClass:"panel-block",on:{click:function(r){t.onMarkerClick(e)}}},[r("span",{staticClass:"panel-icon"},[r("MilSymbol",{attrs:{size:12,sidc:e.properties.sidc||t.DEFAULT_SIDC}})],1),t._v("\n    "+t._s(e.properties.name)+"\n  ")])})],2)},E=[],z=(r("c5f6"),a["default"].extend({name:"MilSymbol",props:{sidc:[String,Number],size:{type:Number,default:15},modifiers:{type:Object}},render:function(t){var e=new k.a.Symbol(this.sidc,{size:this.size,simpleStatusModifier:!0},this.modifiers||{});return t("span",{attrs:{class:"milsymbol"},domProps:{innerHTML:e.asSVG()}})}})),I="10030100001101000000",J=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(l["a"])(this,Object(p["a"])(e).apply(this,arguments)),t.DEFAULT_SIDC=I,t}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"onMarkerClick",value:function(t){this.$emit("markerSelect",t)}},{key:"features",get:function(){return this.markers.features}}]),e}(f["e"]);h["a"]([Object(f["c"])({required:!0,type:Object})],J.prototype,"markers",void 0),J=h["a"]([Object(f["a"])({components:{MilSymbol:z}})],J);var U=J,V=U,q=Object(D["a"])(V,R,E,!1,null,null,null);q.options.__file="MarkerList.vue";var B=q.exports,H=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"map-container",attrs:{viewBox:"0 0 "+t.width+" "+t.height}},[t.isMounted?t._t("default"):t._e()],2)},K=[],Q=900,W=900,X=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(l["a"])(this,Object(p["a"])(e).apply(this,arguments)),t.isMounted=!1,t.width=Q,t.height=W,t.globeData={},t}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"mounted",value:function(){this.d3g=new P(this.$el,this.width,this.height,{scale:this.scale}),this.globeData.mapContainer=this.d3g,this.isMounted=!0}},{key:"onRotationChange",value:function(t){this.d3g.rotation=t}},{key:"getRotation",value:function(){return this.d3g.rotation}},{key:"rotateTo",value:function(t){this.d3g.rotateTo(t)}}]),e}(a["default"]);h["a"]([Object(f["c"])()],X.prototype,"rotation",void 0),h["a"]([Object(f["c"])({type:Number})],X.prototype,"scale",void 0),h["a"]([Object(f["d"])()],X.prototype,"globeData",void 0),h["a"]([Object(f["f"])("rotation",{deep:!0})],X.prototype,"onRotationChange",null),X=h["a"]([f["a"]],X);var Y=X,Z=Y,tt=(r("76f1"),Object(D["a"])(Z,H,K,!1,null,null,null));tt.options.__file="GlobeMap.vue";var et=tt.exports,rt=[.015,-.005],at=[19.666666666666664,-30,0],nt=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(l["a"])(this,Object(p["a"])(e).apply(this,arguments)),t.rotation=at,t.scale=400,t.layer=$,t.spin=!1,t}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"mounted",value:function(){}},{key:"onMarkerSelect",value:function(t){console.log("Selected",Object(i["a"])({},t.properties));var e=t.geometry.coordinates;this.$refs.gmap.rotateTo(e)}},{key:"toggleSpin",value:function(){var t=this;this.spin?(this.timer&&(this.timer.stop(),at=this.$refs.gmap.getRotation()),this.spin=!1):(this.timer&&this.timer.stop(),at=this.$refs.gmap.getRotation(),this.timer=Object(d["c"])(function(e){t.rotation=[at[0]+rt[0]*e,at[1]+rt[1]*e,at[2]]}),this.spin=!0)}}]),e}(f["e"]);nt=h["a"]([Object(f["a"])({components:{GlobeMap:et,MarkerList:B,MapSymbolLayer:L}})],nt);var ot=nt,it=ot,st=(r("5c0b"),Object(D["a"])(it,n,o,!1,null,null,null));st.options.__file="App.vue";var ct=st.exports;r("92c6");a["default"].config.productionTip=!1,new a["default"]({render:function(t){return t(ct)}}).$mount("#app")}});
//# sourceMappingURL=app-legacy.31644ec6.js.map